# 数据库设计

​	

数据库设计的目标是为用户和各种应用系统提供一个**信息基础设施**和**高效率的运行环境** 。

高效率的运行环境？
    ：数据库数据的**存取**效率高
    ：数据库存储**空间的利用率**高
    ：数据库系统**运行管理**的效率高

###  数据库设计的特点

1. 数据库建设的基本规律：三分技术，七分管理，十二分基础数据


2. 结构（数据）设计和行为（处理）设计相结合 

### 数据库设计方法

手工试凑法

规范设计法

​	：手工设计方法
​    ：基本思想
​    	：过程迭代和逐步求精
​    	：典型方法
​    **新奥尔良**（New Orleans）方法
​    基于**E-R模型**的数据库设计方法
​    **3NF**（第三范式）的设计方法
​    **面向对象**的数据库设计方法
​    统一建模语言（**UML**）方法

### 数据库设计的基本步骤

数据库设计分6个阶段：（每个阶段都做了什么）
**需求分析**：是否做得充分与准确，决定了构建数据库的速度和质量
**概念结构设计**：通过对用户需求进行综合、归纳与抽象，形成一个独立于具体数据库管理系统的概念模型
**逻辑结构设计**：将概念结构转换为某个数据库管理系统所支持的数据模型，并对其进行优化
**物理结构设计**：为逻辑数据结构选取一个最适合应用环境的物理结构，包括存储结构和存取方法
**数据库实施**：根据逻辑设计和物理设计的结果构建数据库，编写与调试应用程序，组织数据入库并进行试运行
**数据库运行和维护** ：经过试运行后即可投入正式运行，在运行过程中必须不断对其进行评估、调整与修改

**需求分析**和**概念设计**独立于任何数据库管理系统 
**逻辑设计**和**物理设计**与选用的数据库管理系统密切相关

![image-20240228202649410](C:\Users\10263\AppData\Roaming\Typora\typora-user-images\image-20240228202649410.png)

参加数据库设计的人员

​	：系统分析人员和数据库设计人员

​	：数据库管理员和用户代表

​	：数据库管理员和用户代表

![image-20240228204130817](C:\Users\10263\AppData\Roaming\Typora\typora-user-images\image-20240228204130817.png)





### 数据库设计过程中的各级模式

![image-20240228204408996](C:\Users\10263\AppData\Roaming\Typora\typora-user-images\image-20240228204408996.png)



## 需求分析

#### 需求分析的任务

​	需求分析就是分析用户的要求

​	：是设计数据库的起点

​	：结果是否准确地反映了用户的实际要求，将直接影响到后面各个阶段的设计，并影响到设计结果是否合理和实用

​	调查的重点是“数据”和“处理”，获得用户对数据库的要求

（1）信息要求

（2）处理要求

（3）安全性与完整性要求

#### 需求分析的方法

分析方法：

==结构化分析方法==（Structured Analysis，简称SA方法）
	：SA方法从最上层的系统组织机构入手
	：采用自顶向下、逐层分解的方式分析系统

![image-20240228210258543](C:\Users\10263\AppData\Roaming\Typora\typora-user-images\image-20240228210258543.png)



#### ==数据字典==

数据字典是关于数据库中**数据的描述**，即**元数据**，不是数据本身

数据字典在需求分析阶段建立，在数据库设计过程中不断修改、充实、完善

数据字典是进行详细的**数据收集和数据分析**所获得的主要结果

注意：
和关系数据库管理系统中数据字典的区别和联系

数据字典的内容：
1.数据项
2.数据结构
3.数据流
4.数据存储
5.处理过程
 	：数据项是数据的最小组成单位
 	：若干个数据项可以组成一个数据结构
 	：数据字典通过对**数据项和数据结构**的定义来描述**数据流、数据存储**的逻辑内容



数据项？

数据项是不可再分的数据单位

数据项描述={
	数据项名,
	数据项含义说明,
	别名,
	数据类型,
	长度,
	取值范围,
	取值含义,
	与其他数据项的逻辑关系,
	数据项之间的联系
}

##### 数据结构？

数据结构反映了数据之间的组合关系。

一个数据结构可以由若干个数据项组成，也可以由若干个数据结构组成，或由若干个数据项和数据结构混合组成。

数据结构描述={
	数据结构名，
	含义说明，
	组成:{数据项或数据结构}
}



##### 数据流？

数据流是数据结构在系统内传输的路径。

数据流描述={
	数据流名,
	说明,
	数据流来源,
    数据流去向,
    组成:{数据结构},
    平均流量,
    高峰期流量
}

数据流来源：说明该数据流来自哪个过程

数据流去向：说明该数据流将到哪个过程去

平均流量：在单位时间（每天、每周、每月等）里的传输次数

高峰期流量：在高峰时期的数据流量

##### 数据存储？

数据存储是数据结构停留或保存的地方，也是数据流的**来源和去向**之一。

数据存储描述={
	数据存储名,
	说明,
	编号,
	输入的数据流 ,
	输出的数据流,
    组成:{数据结构},
    数据量,
    存取频度,
    存取方式
}

存取频度：每小时、每天或每周存取次数，每次存取的数据量等信息 
存取方法：批**处理** / 联机处理；**检索** / 更新；顺序检索 / 随机检索
输入的数据流：数据来源
输出的数据流：数据去向

##### 处理过程？

处理过程的具体处理逻辑一般用判定表或判定树来描述。

数据字典中只需要描述处理过程的说明性信息

处理过程描述={
	处理过程名,
	说明,
	输入:{数据流},   
    输出:{数据流},
    处理:{简要说明}
}
简要说明：说明该处理过程的功能及处理要求
	：功能：该处理过程用来做什么
处理要求：处理频度要求，如单位时间里处理多少事务，多少数据量、响应时间要求等
	：处理要求是后面物理设计的输入及性能评价的标准

**第一阶段**收集的基础数据（用**数据字典**来表达）是下一步进行**概念设计的基础**。

强调两点 ：
（1）设计人员应充分考虑到可能的扩充和改变，使设计易于更改，系统易于扩充 
（2）必须强调用户的参与



## 概念结构设计



#### 概念模型

将需求分析得到的用户需求抽象为信息结构（即概念模型）的过程就是概念结构设计

概念模型的特点
（1）能真实、充分地反映现实世界，是现实世界的一个真
         实模型。
（2）易于理解，从而可以用它和不熟悉计算机的用户交换
          意见。
（3）易于更改，当应用环境和应用要求改变时，容易对概
         念模型修改和扩充。
（4）易于向关系、网状、层次等各种数据模型转换

描述概念模型的工具：E-R模型

#### ==E-R模型==

1. 实体之间的联系
（1）两个**实体型**之间的联系：
		①一对一联系（1∶1）
		如果对于**实体集**A中的每一个实体，实体集B中至多有一个（也可以没有）实体与之联系，反之亦然，则称	实体集A与实体集B具有一对一联系，记为1∶1。
		②一对多联系（1∶n）
		如果对于**实体集**A中的每一个实体，实体集B中有n个实体（n≥0）与之联系，反之，对于实体集B中的每一	个实体，实体集A中至多只有一个实体与之联系，则称实体集A与实体集B有一对多联系，记为1∶n。
		③多对多联系（m∶n）
		如果对于实体集A中的每一个实体，实体集B中有n个实体（n≥0）与之联系，反之，对于实体集B中的每一个实体，实体集A中也有m个实体（m≥0）与之联系，则称实体集A与实体集B具有多对多联系，记m∶n。
	
	（2）两个以上的实体型之间的联系
	一般地，两个以上的实体型之间也存在着一对一、一对多、多对多联系。
	对于课程、教师与参考书3个实体型，如果一门课程可以有若干个教师讲授，使用若干本参考书，而每一个教师只讲授一门课程，每一本参考书只供一门课程使用，则课程与教师、参考书之间的联系是一对多的，
	
	（3）单个实体型内的联系
	同一个实体集内的各实体之间也可以存在一对一、一对多、多对多的联系。
	例如，职工实体型内部具有领导与被领导的联系，即某一职工（干部）“领导”若干名职工，而一个职工仅被另外一个职工直接领导，因此这是一对多的联系.

**联系的度**：参与联系的实体型的数目

#### ==概念结构设计==

​	1.实体与属性的划分原则：

​	为了简化E-R图的处置，现实世界的事物能作为属性对待的，尽量作为属性对待。

​	两条准则：

​	（1）作为属性，不能再具有需要描述的性质。属性必须是不可分的数据项，不能包含其他属性。

​	（2）属性不能与其他实体具有联系，即E-R图中所表示的联系是实体之间的联系。

​	2. E-R图的集成

​	E-R图的集成一般需要分两步：
 	1）合并。解决各分E-R图之间的冲突，将分E-R图合并起来生成初步E-R图。
 	2）修改和重构。消除不必要的冗余，生成基本E-R图。









##  逻辑结构设计

逻辑结构设计的任务：把概念结构设计阶段设计好的基本E-R图转换为与选用数据库管理系统产品所支持的数据模型相符合的逻辑结构

 E-R图向关系模型的转换

​	转换内容
​	：E-R图由实体型、实体的属性和实体型之间的联系三个要素组成
​	：关系模型的**逻辑结构**是一组**关系模式的集合**
​	：将E-R图转换为关系模型：将实体型、实体的属性和实体型之间的联系转化为关系模式

​	转换原则

​	1. 一个实体型转换为一个关系模式。

​		关系的属性：实体的属性

​		关系的码：实体的码

​	2. 实体型间的联系有以下不同情况